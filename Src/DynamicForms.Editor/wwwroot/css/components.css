/* ===== GLOBAL NAV ===== */
.global-nav {
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    width: 64px;
    background: var(--bg-primary);
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 12px 0;
    z-index: 1000;
}
.nav-logo {
    width: 40px;
    height: 40px;
    background: var(--primary);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 20px;
    margin-bottom: 24px;
}
.nav-item {
    width: 44px;
    height: 44px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-muted);
    cursor: pointer;
    margin-bottom: 8px;
    transition: all 0.15s;
    position: relative;
    text-decoration: none;
}
.nav-item:hover { background: var(--bg-tertiary); color: var(--text-primary); }
.nav-item.active { background: var(--primary-light); color: var(--primary); }
.nav-item i { font-size: 20px; }
.nav-tooltip {
    position: absolute;
    left: 60px;
    background: var(--text-primary);
    color: var(--bg-primary);
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 500;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.15s;
    z-index: 1001;
}
.nav-item:hover .nav-tooltip { opacity: 1; }
.nav-spacer { flex: 1; }
.nav-divider { width: 32px; height: 1px; background: var(--border-color); margin: 8px 0; }

/* ===== SHARED HEADER ===== */
.app-header {
    height: var(--header-height);
    background: var(--bg-primary);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
    flex-shrink: 0;
}
.header-left { display: flex; align-items: center; gap: 12px; }
.header-title { font-size: 18px; font-weight: 700; display: flex; align-items: center; gap: 10px; }
.header-title i { color: var(--primary); }
.header-actions { display: flex; gap: 8px; align-items: center; }

/* ===== BUTTONS ===== */
.btn {
    padding: 8px 16px; border-radius: 6px; font-weight: 500; font-size: 13px;
    border: none; cursor: pointer; transition: all 0.15s;
    display: inline-flex; align-items: center; gap: 6px; font-family: inherit;
    text-decoration: none;
}
.btn-ghost { background: transparent; color: var(--text-secondary); }
.btn-ghost:hover { background: var(--bg-tertiary); color: var(--text-primary); }
.btn-outline { background: var(--bg-primary); border: 1px solid var(--border-color); color: var(--text-primary); }
.btn-outline:hover { border-color: var(--border-strong); background: var(--bg-tertiary); }
.btn-primary { background: var(--primary); color: white; }
.btn-primary:hover { background: var(--primary-dark); }
.btn-success { background: var(--success); color: white; }
.btn-sm { padding: 6px 12px; font-size: 12px; }
.btn-xs { padding: 4px 8px; font-size: 11px; }
.btn-icon { width: 36px; height: 36px; padding: 0; justify-content: center; }
.btn-icon-sm { width: 32px; height: 32px; padding: 0; justify-content: center; font-size: 14px; }

/* ===== BADGES ===== */
.badge { padding: 3px 8px; border-radius: 4px; font-size: 10px; font-weight: 600; text-transform: uppercase; }
.badge-draft { background: var(--bg-tertiary); color: var(--text-secondary); }
.badge-published { background: var(--success-light); color: var(--success); }
.badge-primary { background: var(--primary-light); color: var(--primary); }
.badge-info { background: var(--info-light); color: var(--info); }
.badge-warning { background: var(--warning-light); color: var(--warning); }
.badge-count { min-width: 18px; height: 18px; padding: 0 5px; border-radius: 9px; font-size: 10px; font-weight: 700; display: inline-flex; align-items: center; justify-content: center; }

/* ===== FORM INPUTS ===== */
.form-group { margin-bottom: 16px; }
.form-label { display: block; font-size: 11px; font-weight: 600; color: var(--text-secondary); margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.3px; }
.form-input, .form-select {
    width: 100%; padding: 8px 12px; border: 1px solid var(--border-color);
    border-radius: 6px; font-size: 13px; background: var(--bg-primary);
    color: var(--text-primary); font-family: inherit; transition: border-color 0.15s;
}
.form-input:focus, .form-select:focus { outline: none; border-color: var(--primary); }
.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }

/* ===== SEARCH BOX ===== */
.search-wrapper { position: relative; }
.search-icon { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: var(--text-muted); font-size: 14px; }
.search-box {
    width: 100%; padding: 8px 10px 8px 32px; border: 1px solid var(--border-color);
    border-radius: 6px; font-size: 13px; background: var(--bg-secondary);
    color: var(--text-primary); font-family: inherit;
}
.search-box:focus { outline: none; border-color: var(--primary); background: var(--bg-primary); }

/* ===== CARDS ===== */
.card { background: var(--bg-primary); border: 1px solid var(--border-color); border-radius: 8px; box-shadow: var(--shadow-sm); }
.card-header { padding: 14px 20px; border-bottom: 1px solid var(--border-color); font-weight: 600; display: flex; justify-content: space-between; align-items: center; }
.card-body { padding: 20px; }

/* ===== TABS ===== */
.tab-nav { display: flex; gap: 4px; border-bottom: 1px solid var(--border-color); padding: 0 20px; background: var(--bg-primary); }
.tab-item { padding: 12px 16px; font-size: 13px; font-weight: 500; color: var(--text-secondary); border-bottom: 2px solid transparent; cursor: pointer; transition: all 0.15s; }
.tab-item:hover { color: var(--text-primary); }
.tab-item.active { color: var(--primary); border-bottom-color: var(--primary); }

/* ===== MODALS ===== */
.modal-backdrop {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.5); z-index: 2000;
    display: flex; align-items: center; justify-content: center;
    padding: 20px; backdrop-filter: blur(2px);
}
.modal {
    background: var(--bg-primary); border-radius: 12px; max-width: 600px;
    width: 100%; max-height: 85vh; overflow: hidden;
    display: flex; flex-direction: column; box-shadow: var(--shadow-lg);
}
.modal-lg { max-width: 800px; }
.modal-header { padding: 16px 20px; border-bottom: 1px solid var(--border-color); display: flex; align-items: center; justify-content: space-between; }
.modal-title { font-size: 16px; font-weight: 700; display: flex; align-items: center; gap: 8px; }
.modal-close { width: 28px; height: 28px; border: none; background: transparent; border-radius: 6px; color: var(--text-secondary); cursor: pointer; display: flex; align-items: center; justify-content: center; }
.modal-close:hover { background: var(--bg-tertiary); color: var(--text-primary); }
.modal-body { flex: 1; overflow-y: auto; padding: 20px; }
.modal-footer { padding: 12px 20px; border-top: 1px solid var(--border-color); display: flex; gap: 8px; justify-content: flex-end; }

/* ===== TOAST ===== */
.toast-container { position: fixed; bottom: 20px; right: 20px; z-index: 3000; display: flex; flex-direction: column; gap: 8px; }
.toast { background: var(--bg-primary); border: 1px solid var(--border-color); padding: 12px 16px; border-radius: 8px; box-shadow: var(--shadow-lg); display: flex; align-items: center; gap: 10px; min-width: 280px; animation: slideIn 0.2s ease; }
.toast-success { background: var(--success); color: white; border-color: var(--success); }
.toast-error { background: var(--danger); color: white; border-color: var(--danger); }
@keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

/* ===== MODULE EDITOR STYLES ===== */
.editor-main-content {
    margin-left: 0 !important; /* Override global .main-content margin */
}

.editor-toolbar {
    height: var(--toolbar-height); background: var(--bg-primary);
    border-bottom: 1px solid var(--border-color);
    display: flex; align-items: center; padding: 0 16px; gap: 8px;
}
.toolbar-group { display: flex; gap: 2px; padding-right: 12px; border-right: 1px solid var(--border-color); }
.toolbar-group:last-child { border-right: none; }
.toolbar-btn {
    width: 32px; height: 32px; border: none; background: transparent;
    border-radius: 6px; color: var(--text-secondary); cursor: pointer;
    display: flex; align-items: center; justify-content: center; transition: all 0.15s;
}
.toolbar-btn:hover { background: var(--bg-tertiary); color: var(--text-primary); }

/* Left Sidebar Tabs */
.left-sidebar { width: var(--sidebar-width); background: var(--bg-primary); border-right: 1px solid var(--border-color); display: flex; flex-direction: column; }
.ls-tabs { display: flex; border-bottom: 1px solid var(--border-color); background: var(--bg-secondary); }
.ls-tab { flex: 1; text-align: center; padding: 10px 4px; font-size: 11px; font-weight: 600; color: var(--text-secondary); cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.15s; display: flex; flex-direction: column; align-items: center; gap: 2px; }
.ls-tab i { font-size: 16px; }
.ls-tab:hover { color: var(--text-primary); background: var(--bg-tertiary); }
.ls-tab.active { color: var(--primary); border-bottom-color: var(--primary); background: var(--bg-primary); }
.sidebar-header { padding: 12px; border-bottom: 1px solid var(--border-color); }
.sidebar-content { flex: 1; overflow-y: auto; padding: 12px; }
.tab-pane { display: none; height: 100%; }
.tab-pane.active { display: flex; flex-direction: column; }

/* Component Palette */
.component-category { margin-bottom: 16px; }
.category-title { font-size: 10px; font-weight: 700; text-transform: uppercase; color: var(--text-muted); margin-bottom: 6px; padding-left: 4px; }
.component-item { padding: 8px 10px; border: 1px solid var(--border-color); border-radius: 6px; margin-bottom: 4px; cursor: pointer; transition: all 0.15s; background: var(--bg-primary); display: flex; align-items: center; gap: 8px; }
.component-item:hover { border-color: var(--primary-muted); background: var(--primary-light); }
.component-icon { width: 26px; height: 26px; border-radius: 5px; background: var(--bg-tertiary); display: flex; align-items: center; justify-content: center; color: var(--text-secondary); font-size: 12px; }
.component-item:hover .component-icon { background: var(--primary); color: white; }
.component-name { font-size: 12px; font-weight: 500; }

/* Outline Tree */
.tree-node { padding: 6px 8px; border-radius: 4px; font-size: 12px; display: flex; align-items: center; gap: 6px; cursor: pointer; margin-bottom: 2px; }
.tree-node:hover { background: var(--bg-secondary); }
.tree-node.selected { background: var(--primary-light); color: var(--primary); font-weight: 500; }
.tree-node-icon { color: var(--text-muted); width: 14px; text-align: center; font-size: 11px; }
.tree-indent { width: 14px; }

/* Validation Items */
.validation-item { padding: 10px; border-radius: 6px; margin-bottom: 6px; display: flex; gap: 8px; cursor: pointer; }
.validation-item.error { background: var(--danger-light); }
.validation-item.warning { background: var(--warning-light); }
.validation-icon { font-size: 13px; }
.validation-item.error .validation-icon { color: var(--danger); }
.validation-item.warning .validation-icon { color: var(--warning); }
.validation-title { font-size: 11px; font-weight: 600; }
.validation-desc { font-size: 10px; color: var(--text-secondary); }

/* Right Sidebar Properties */
.right-sidebar { width: var(--sidebar-width); background: var(--bg-primary); border-left: 1px solid var(--border-color); display: flex; flex-direction: column; overflow: hidden; }
.property-section { border-bottom: 1px solid var(--border-color); }
.property-section-header { padding: 12px; background: var(--bg-secondary); cursor: pointer; display: flex; align-items: center; justify-content: space-between; }
.property-section-header:hover { background: var(--bg-tertiary); }
.property-section-title { font-size: 12px; font-weight: 600; display: flex; align-items: center; gap: 8px; }
.property-section-title i { color: var(--text-muted); font-size: 14px; }
.property-section-body { padding: 12px; }
.property-section-body.collapsed { display: none; }

.prop-group { margin-bottom: 12px; }
.prop-label { display: block; font-size: 10px; font-weight: 600; color: var(--text-secondary); margin-bottom: 4px; text-transform: uppercase; }
.prop-input, .prop-select { width: 100%; padding: 7px 10px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 12px; background: var(--bg-primary); color: var(--text-primary); }
.prop-input:focus, .prop-select:focus { outline: none; border-color: var(--primary); }
.prop-row { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.checkbox-group { display: flex; align-items: center; gap: 8px; padding: 6px 8px; border-radius: 4px; cursor: pointer; }
.checkbox-group:hover { background: var(--bg-secondary); }
.lang-tabs { display: flex; gap: 2px; margin-bottom: 8px; background: var(--bg-tertiary); padding: 2px; border-radius: 6px; }
.lang-tab { flex: 1; padding: 5px; border: none; background: transparent; border-radius: 4px; font-size: 11px; font-weight: 600; color: var(--text-secondary); cursor: pointer; text-align: center; }
.lang-tab.active { background: var(--bg-primary); color: var(--primary); }

/* Options Editor */
.options-editor { border: 1px solid var(--border-color); border-radius: 6px; overflow: hidden; }
.options-header { padding: 8px 10px; background: var(--bg-secondary); border-bottom: 1px solid var(--border-color); display: flex; align-items: center; justify-content: space-between; }
.options-toggle { display: flex; gap: 2px; background: var(--bg-tertiary); padding: 2px; border-radius: 4px; }
.options-toggle button { padding: 4px 10px; border: none; background: transparent; border-radius: 3px; font-size: 11px; font-weight: 500; color: var(--text-secondary); cursor: pointer; }
.options-toggle button.active { background: var(--bg-primary); color: var(--primary); }
.options-list { max-height: 180px; overflow-y: auto; }
.option-row { display: grid; grid-template-columns: 20px 1fr 1fr 1fr 24px; gap: 6px; padding: 6px 10px; border-bottom: 1px solid var(--border-color); align-items: center; font-size: 11px; }
.option-row:last-child { border-bottom: none; }
.option-row input { padding: 4px 6px; border: 1px solid var(--border-color); border-radius: 3px; font-size: 11px; }

/* Editor Three-Panel Layout */
.editor-page {
    display: flex;
    height: 100vh;
    overflow: hidden;
}

.editor-main-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    margin-left: 64px; /* Global nav width */
}

.editor-container {
    display: flex;
    flex: 1;
    overflow: hidden;
}

.canvas-container {
    flex: 1;
    overflow-y: auto;
    background: var(--bg-secondary);
}

/* Canvas Styles */
.canvas {
    max-width: 760px;
    margin: 24px auto;
    background: var(--bg-primary);
    border-radius: 8px;
    box-shadow: var(--shadow-md);
    min-height: calc(100vh - 200px); /* Adjust as needed */
}

.canvas-header {
    padding: 28px 36px 16px;
    border-bottom: 1px solid var(--border-color);
}

.canvas-title {
    font-size: 22px;
    font-weight: 700;
    margin-bottom: 4px;
}

.canvas-description {
    font-size: 13px;
    color: var(--text-secondary);
}

.canvas-body {
    padding: 20px 36px 36px;
}

/* Field Items */
.field-item {
    position: relative;
    margin-bottom: 16px;
    padding: 12px;
    border: 2px dashed transparent;
    border-radius: 8px;
    transition: all 0.15s;
    cursor: pointer;
}

.field-item:hover {
    border-color: var(--primary-muted);
    background: var(--primary-light);
}

.field-item.selected {
    border-color: var(--primary);
    background: var(--primary-light);
}

.canvas-label {
    display: block;
    font-weight: 500;
    margin-bottom: 6px;
    font-size: 13px;
}

.required-marker {
    color: var(--danger);
}

.canvas-input-field {
    margin-bottom: 16px;
}

.canvas-input {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background: var(--bg-secondary);
    color: var(--text-primary);
    font-family: inherit;
    font-size: 13px;
}

.canvas-help {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 4px;
}

/* Section specific */
.canvas-section {
    border: 1px solid var(--border-color);
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 16px;
}

.section-header {
    padding: 12px 16px;
    background: var(--bg-tertiary);
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: var(--text-primary);
}

.section-body {
    padding: 16px;
    min-height: 60px;
    background: var(--bg-primary);
}

.section-empty {
    text-align: center;
    padding: 20px;
    color: var(--text-muted);
    font-size: 12px;
    border: 1px dashed var(--border-color);
    border-radius: 6px;
    margin: 10px;
}

/* Choice fields */
.canvas-radio-group, .canvas-checkbox-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.canvas-radio, .canvas-checkbox {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: var(--text-primary);
}

/* File Upload */
.file-upload-preview {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    min-height: 80px;
    border: 2px dashed var(--border-color);
    background: var(--bg-secondary);
    color: var(--text-muted);
    font-size: 14px;
}

/* DataGrid */
.canvas-datagrid {
    border: 1px solid var(--border-color);
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 16px;
}

.datagrid-preview {
    width: 100%;
    border-collapse: collapse;
    font-size: 12px;
    color: var(--text-secondary);
}

.datagrid-preview th, .datagrid-preview td {
    padding: 8px 12px;
    border-bottom: 1px solid var(--border-color);
    text-align: left;
}

.datagrid-preview th {
    background: var(--bg-tertiary);
    font-weight: 600;
    color: var(--text-primary);
}

.datagrid-actions {
    padding: 8px;
    background: var(--bg-primary);
    border-top: 1px solid var(--border-color);
    text-align: right;
}

/* Field Actions Overlay */
.field-actions {
    position: absolute;
    top: 8px;
    right: 8px;
    display: flex;
    gap: 4px;
    background: var(--bg-primary);
    border-radius: 6px;
    box-shadow: var(--shadow-sm);
    padding: 4px;
    opacity: 0; /* Hidden by default */
    transition: opacity 0.15s;
}

.field-item:hover .field-actions,
.field-item.selected .field-actions {
    opacity: 1;
}

.action-btn {
    width: 28px;
    height: 28px;
    border: none;
    background: none;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    transition: background-color 0.15s, color 0.15s;
}

.action-btn:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.action-btn.danger:hover {
    background: var(--danger-light);
    color: var(--danger);
}

/* Empty Canvas */
.empty-canvas {
    text-align: center;
    padding: 60px 20px;
    color: var(--text-muted);
    font-size: 14px;
    margin-top: 50px;
}

.empty-canvas i {
    font-size: 48px;
    opacity: 0.3;
    margin-bottom: 10px;
    display: block;
}

/* Html field */
.html-content-preview {
    min-height: 80px;
    border: 1px dashed var(--border-color);
    background: var(--bg-secondary);
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-muted);
    font-size: 14px;
    gap: 8px;
}