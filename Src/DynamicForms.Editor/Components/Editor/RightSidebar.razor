@using DynamicForms.Editor.Services
@using DynamicForms.Editor.Components.Properties

<div class="right-sidebar">
    <div class="sidebar-header" style="background: var(--bg-secondary);">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-weight: 600; font-size: 13px;">Properties</span>
            @if (!string.IsNullOrEmpty(EditorState.SelectedFieldId))
            {
                <Badge Variant="primary">@EditorState.SelectedFieldId</Badge>
            }
        </div>
    </div>
    <div style="flex: 1; overflow-y: auto;">
        <PropertiesPanel />
    </div>
</div>

@code {
    [Inject] private IEditorStateService EditorState { get; set; } = default!;

    protected override void OnInitialized()
    {
        EditorState.OnStateChanged += StateHasChanged;
    }

    public void Dispose()
    {
        EditorState.OnStateChanged -= StateHasChanged;
    }
}