@* Text input component *@

<div class="@(ShowLabel ? "form-group" : "") @Class">
    @if (ShowLabel && !string.IsNullOrEmpty(Label))
    {
        <label class="@LabelClass">@Label</label>
    }
    <input type="@Type"
           class="@InputClass"
           placeholder="@Placeholder"
           value="@Value"
           disabled="@Disabled"
           readonly="@ReadOnly"
           @oninput="HandleInput"
           @onblur="HandleBlur" />
</div>

@code {
    [Parameter] public string? Label { get; set; }
    [Parameter] public string? Value { get; set; }
    [Parameter] public EventCallback<string?> ValueChanged { get; set; }
    [Parameter] public string Placeholder { get; set; } = "";
    [Parameter] public string Type { get; set; } = "text";
    [Parameter] public bool Disabled { get; set; }
    [Parameter] public bool ReadOnly { get; set; }
    [Parameter] public bool ShowLabel { get; set; } = true;
    [Parameter] public bool IsMonospace { get; set; }
    [Parameter] public string Size { get; set; } = "normal"; // normal, prop
    [Parameter] public string? Class { get; set; }

    private string LabelClass => Size == "prop" ? "prop-label" : "form-label";
    private string InputClass => Size == "prop"
        ? $"prop-input{(IsMonospace ? " text-mono" : "")}"
        : $"form-input{(IsMonospace ? " text-mono" : "")}";

    private async Task HandleInput(ChangeEventArgs e)
    {
        Value = e.Value?.ToString();
        await ValueChanged.InvokeAsync(Value);
    }

    private async Task HandleBlur(FocusEventArgs e)
    {
        await ValueChanged.InvokeAsync(Value);
    }
}
